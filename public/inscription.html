<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Inscription compl√®te</title>
  <link rel="stylesheet" href="design/style.css">
  <link rel="icon" href="images/favicon.ico" type="image/x-icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

  <form id="form-inscription">
    <h2>Cr√©er un compte client</h2>

    <input type="text" id="nom" placeholder="Nom" required>
    <input type="text" id="pr√©nom" placeholder="Pr√©nom" required>
    <input type="email" id="email" placeholder="Adresse e-mail" required>
    <input type="password" id="password" placeholder="Mot de passe" required>
    <input type="password" id="confirm-password" placeholder="Confirmer le mot de passe" required>
    <input type="text" id="telephone" placeholder="T√©l√©phone" required>
    <input type="text" id="adresse" placeholder="Adresse" required>
    <input type="text" id="ville" placeholder="Ville" required>
    <input type="text" id="codePostal" placeholder="Code Postal" required>
    <input type="date" id="naissance" required>

    <button type="submit">S'inscrire</button>
    <div class="message" id="message"></div>
  </form>

  <script>
    const form = document.getElementById('form-inscription');
    const message = document.getElementById('message');

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const nom = document.getElementById('nom').value.trim();
      const pr√©nom = document.getElementById('pr√©nom').value.trim();
      const email = document.getElementById('email').value.trim();
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('confirm-password').value;
      const telephone = document.getElementById('telephone').value.trim();
      const adresse = document.getElementById('adresse').value.trim();
      const ville = document.getElementById('ville').value.trim();
      const codePostal = document.getElementById('codePostal').value.trim();
      const naissance = document.getElementById('naissance').value;

      if (!nom || !pr√©nom || !email || !password || !confirmPassword || !telephone || !adresse || !ville || !codePostal || !naissance) {
        message.textContent = "Veuillez remplir tous les champs.";
        message.style.color = "red";
        return;
      }

      if (password !== confirmPassword) {
        message.textContent = "Les mots de passe ne correspondent pas.";
        message.style.color = "red";
        return;
      }

      const utilisateur = {
        nom,
        pr√©nom,
        email,
        password,
        telephone,
        adresse,
        ville,
        codePostal,
        naissance
      };

      localStorage.setItem('utilisateurConnecte', JSON.stringify(utilisateur));

      // Envoi de l'e-mail via TON serveur Node.js
      fetch('/send-email', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          to: email,
          subject: "Bienvenue chez GameTrash üéÆ",
          html: `
            <div style="font-family: Arial, sans-serif; padding: 20px; background-color: #f7f7f7;">
              <h2 style="color: #333;">Bienvenue ${pr√©nom} ${nom} !</h2>
              <p>Merci pour votre inscription chez <strong>GameTrash</strong> üéÆ.</p>
              <h3>Voici vos informations :</h3>
              <ul>
                <li><strong>T√©l√©phone :</strong> ${telephone}</li>
                <li><strong>Adresse :</strong> ${adresse}, ${ville}, ${codePostal}</li>
                <li><strong>Date de naissance :</strong> ${naissance}</li>
              </ul>
              <p style="margin-top:20px;">Nous avons h√¢te de vous faire d√©couvrir nos meilleurs jeux r√©tro !</p>
              <p>√Ä tr√®s vite,<br><strong>L'√©quipe GameTrash</strong> üéÆ</p>
            </div>
          `
        })
      })
      .then(response => response.text())
      .then(data => {
        message.textContent = "Inscription r√©ussie ! Un email de confirmation a √©t√© envoy√©.";
        message.style.color = "green";
      })
      .catch(error => {
        console.error('Erreur lors de l\'envoi de l\'email:', error);
        message.textContent = "Inscription r√©ussie, mais l'email n'a pas pu √™tre envoy√©.";
        message.style.color = "orange";
      });
    });
  </script>

</body>
</html>